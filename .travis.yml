language: node_js
node_js:
  - '7'
  - '6'

notifications:
  email:
    on_success: never
    on_failure: change
  slack:
    template:
      - "%{repository_slug}@%{branch} (%{commit}): %{result} in %{duration}"
      - "%{build_url}"
    rooms:
      secure: vAvbsr6wFLkvk++43OASYJhdEKqh/GrvSOQyALHyXALHmOP6fPwAUhUDPeuxv6IZkF+PBGJwNcLejfeIHiPdEx5Xt96DXXKwc70Ph6j2OxKXyr6YxIyV28zGkKPENEBKUjr1qKfpMXi+01Myl5urRK2efuQQdYcV/EPOfMVjjTUhRHuH32FWeHr1oktZ26Ad5g6Cip6A2RGu68ESAwcJZKg1SeocT6uUVXkjIP+4ENyp3tBBHhYeCtU2qJXYKhWY7GfX5aDUKl9+PDhFbyz+xE4LLygSWD81G5QHAMkDQTBE1WkrTbQUPfOFgKZ2T0l3Eohn9NwOL8ymIhSEcZx6omqbaczSeOaHGxgVDiQF3p1xl5LsFF+jTheihsuoJdBJ4YherQvVYOmnVWam0JwGE2CAPaCeIal8GXRnCl8esS3N/QY25TuD9x7SHg9GSKMNyyUg7SjNDf4EHlPa41ac+qiaqfmUMYYGvJxrUyFRF94v119USfz8i70k3OwSTrFIGGKZ+NwCrafHz+k/TCef9dgRIrQovYbyJpcrdQGzQ0YTwBjGw9NnBBHskXK/WTQxd26AlzxFhqu67QyHWrM6RNaIfeL51zEuZReA8BihIoSyJ1aF3HENjLqv+xjXlNAs0juYAekZ0PGC4yfDzorKTsPcW3rMnDQl1BnrZDaJgLc=
    on_success: change
    on_failure: always

env:
  global:
    secure: DphEft0byVZ35eO2zBf0m2z+gJ5sfnnmqSHBYTJL3W6Sxe/psAtK11m3SKFmkMNUshNdk20Uo9lhMbs2utx7sncOYlKFmGfkk9jOA6eiH4RomXuoEF7fXdN3kxfs2jTHhtfVESAGwbRCEyhfvaCYnzNHI3E/WofCMl907DrdP2U+MA8Ej6lM0UWvgVcBg9cR5Nu+h63gM0+t5yX7RZ3dJF/zCRjJN9/8aULLUvl/3nU9GW50FnrLqkRomtQv9W3umw/BDZ9XX8Ymef4fyjK0sbYu48BrkcmHYV+qt5mNPaynkoa3QgVQ9LgWbwsqArxvPiUxVjnAbW+daW6B/dbzSWHvUdcRDzhHQ1pqoJwyax36oXP3JdkXFgs8B5cKhmaXTFH7NjAGAt3nqRb6Jzbtho+bg8z3tPenFJbCftXChysyoR/Srip6L7JP9uHKaqY0PHPTB0ocWlO1Kzn5J7p98z/6e2Y9NdS1sAfjLctlg0SezJlYscm9l4Pzju25rCUva3VnHEGPcJ936WYsxViFff3BbgUPOmjU3MNpVo9iM1UnrN+XD8S0uUDYQBZwg9RxINC/aEqihrJXlej5XO2YETx+5Rls50ZGiSuEpLtevISnbpBFgmeoHVaC/jFQuV9ax4DFmW0VzdYq9LpDhG5byGOYupyqrWx9I1Bm3hU7jws=

cache:
  directories:
    - node_modules

install: 'npm install'
before_script: 'snyk auth $SNYK_TOKEN'
script: 'npm test'
